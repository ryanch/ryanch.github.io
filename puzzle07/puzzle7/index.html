<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <title>Puzzle 7: Tune This</title>

    <!-- Bootstrap core CSS -->
    <link href="../assets/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
    <link href="../assets/blog.css" rel="stylesheet">
    <script src="../assets/app.js" ></script>
  </head>


  <body  onload="app.pageLoaded(); startup();">

    <div class="container">
      <header class="blog-header py-3">
        <div class="row flex-nowrap justify-content-between align-items-center">
          <div class="col-4 pt-1">
            <a class="text-muted" href="#">#puzzle-hunt</a>
          </div>
          <div class="col-4 text-center">
            <a class="blog-header-logo puzzle7_color" href="#">"Tune This"</a>
          </div>
          <div class="col-4 d-flex justify-content-end align-items-center">
            <a class="text-muted" href="../index.html">Home</a>
          </div>
        </div>
      </header>

      <script>app.printTopNav("../");</script>

      <div class="jumbotron p-3 p-md-5 text-white rounded bg-dark">
        <div class="col-md-6 px-0">
          <h1 class="display-4 font-italic">Puzzle 7</h1>
          <p class="lead my-3">TODO</p>
          <script>
            app.printPuzzleAnswerInputBlock(1);
          </script>
        </div>
      </div>

      <div class="col-md-12">
        <div class="card flex-md-row mb-4 box-shadow xxh-md-250">
          <div class="card-body d-flex flex-column align-items-start">

            <img src="tv/shows/off.png" style="z-index:1; position:absolute; left:150px; top:230px;" id="tv_screen" width="512" height="512"  />

            <img src="tv/tv_overlay.png" style="z-index:100;" />

            
            <img src="tv/button_up.png" style="z-index:200; position:absolute; left:668px; top:626px; cursor:pointer; " id="buttonA" onclick="toggleButton('buttonA')"  />
            <img src="tv/button_up.png" style="z-index:200; position:absolute; left:734px; top:626px; cursor:pointer; " id="buttonB" onclick="toggleButton('buttonB')" />

            <img src="tv/knob_a.png" style="z-index:200; position:absolute; left:687px; top:255px; cursor:pointer; " id="knobA" onclick="spinKnob('knobA')" />
            <img src="tv/knob_b.png" style="z-index:200; position:absolute; left:687px; top:345px; cursor:pointer; " id="knobB" onclick="spinKnob('knobB')" />


            

            <script>

              var buttonAIsUp = true;
              var buttonBIsUp = true;
              var knobBChannel = 0;
              var knobAChannel = 0;


              function startup() {
                // spin the knobs to sync the tv with the data model
                spinKnob("knobA");
                spinKnob("knobB");
              }

              function toggleButton(idName) {
                  var obj = document.getElementById(idName);
                  
                  var newStateIsUp = false;
                  if (idName == "buttonA" ) {
                    buttonAIsUp = !buttonAIsUp;
                    newStateIsUp= buttonAIsUp;
                  }
                  if (idName == "buttonB" ) {
                    buttonBIsUp = !buttonBIsUp;
                    newStateIsUp= buttonBIsUp;
                  }

                  obj.src = newStateIsUp ? "tv/button_up.png" : "tv/button_down.png";

                  syncTvImg();
              }


              function spinKnob(idName) {
                  var obj = document.getElementById(idName);
                  var channel = 0;
                  if ( idName == "knobA" ) {
                    channel = knobAChannel + 1;
                    if (channel > 11) channel = 0;
                    knobAChannel = channel;
                  }
                  if ( idName == "knobB" ) {
                    channel = knobBChannel + 1;
                    if (channel > 11) channel = 0;
                    knobBChannel = channel;
                  }

               

                  var spin = channel * 30;
                  obj.style.display = obj.style.transform = "rotate(" + spin + "deg)";

                  syncTvImg();
              }


              var channelImages = {};
              channelImages[ 2 ] = {
                 img: "tv/shows/happy-music-small.png"
              };
              channelImages[ 3 ] = {
                 img: "tv/shows/lovely-kids.png"
              };
              channelImages[ 4 ] = {
                 img: "tv/shows/tower-rock.png"
              };
              channelImages[ 21 ] = {
                 img: "tv/shows/movie-maker.jpg"
              };
              channelImages[ 22 ] = {
                 img: "tv/shows/band-camp.jpg"
              };
              channelImages[ 23 ] = {
                 img: "tv/shows/education-jungle.jpg"
              };


              function syncTvImg() {

                var tvScreen = document.getElementById( "tv_screen" );

                // if button A is up the TV is OFF.
                if ( buttonAIsUp ) {
                  tvScreen.src = "tv/shows/off.png";
                  return;
                }

                var channelIndex = 0;

                if (buttonBIsUp) {
                  channelIndex = knobAChannel;
                }
                else {
                  channelIndex = knobBChannel + 20;
                }

                var newImage = channelImages[ channelIndex ];
                if ( newImage ) {
                  tvScreen.src = newImage.img;
                }
                else {
                  tvScreen.src = "tv/shows/static.gif";
                }

               


              }

            </script>



          </div>
        </div>
      </div>




    </div>



  </body>
</html>

